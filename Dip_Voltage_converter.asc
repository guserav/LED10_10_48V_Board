Version 4
SHEET 1 1280 680
WIRE -288 -416 -480 -416
WIRE -48 -416 -160 -416
WIRE 288 -416 32 -416
WIRE -288 -352 -288 -416
WIRE -208 -352 -288 -352
WIRE -80 -336 -160 -336
WIRE -320 -288 -480 -288
WIRE -320 -272 -320 -288
WIRE -208 -272 -320 -272
WIRE 32 -256 -160 -256
WIRE 160 -256 112 -256
WIRE 288 -256 288 -416
WIRE 288 -256 160 -256
WIRE -80 -208 -80 -336
WIRE -80 -208 -160 -208
WIRE 160 -160 160 -256
WIRE 288 -160 160 -160
WIRE 336 -160 288 -160
WIRE 432 -160 400 -160
WIRE -208 -144 -480 -144
WIRE 0 -128 -160 -128
WIRE 160 -128 160 -160
WIRE 160 -128 80 -128
WIRE 0 -64 -160 -64
WIRE 288 -64 288 -160
WIRE 320 -64 288 -64
WIRE 432 -64 432 -160
WIRE 432 -64 400 -64
WIRE 160 -48 160 -128
WIRE 160 -48 80 -48
WIRE 0 -16 0 -64
WIRE 80 -16 80 -48
WIRE -208 0 -400 0
WIRE -400 16 -400 0
WIRE 576 32 576 -64
WIRE 864 48 864 16
WIRE 512 96 512 -48
WIRE 512 96 352 96
WIRE 352 128 352 96
WIRE 288 144 288 -64
WIRE 320 144 288 144
WIRE 432 160 432 -64
WIRE 432 160 384 160
WIRE 320 176 48 176
FLAG -576 -224 0
FLAG 352 192 0
FLAG -576 -304 5V
FLAG 48 96 5V
FLAG 48 256 0
FLAG -80 -336 5V
FLAG -160 16 0
FLAG -208 -400 0
FLAG -208 -320 0
FLAG -208 -192 0
FLAG -208 -48 0
FLAG -400 96 0
FLAG -480 -336 0
FLAG -480 -208 0
FLAG -480 -64 0
FLAG -976 144 0
FLAG -976 64 48V
FLAG 864 128 0
FLAG 864 -64 48V
FLAG 512 -48 5V
FLAG -1024 -288 0
FLAG -1024 -368 22V
FLAG 576 -64 22V
SYMBOL voltage -576 -320 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res 64 192 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value {mc(100k, e)}
SYMATTR SpiceLine tol=1
SYMBOL res 64 272 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value {mc(100k, e)}
SYMATTR SpiceLine tol=1
SYMBOL res 416 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {mc(w/2,e)}
SYMATTR SpiceLine tol=1
SYMBOL sw -160 -224 R0
SYMATTR InstName S2
SYMBOL sw -160 -352 R0
SYMATTR InstName S3
SYMBOL sw -160 -432 R0
SYMATTR InstName S4
SYMBOL sw -160 -80 R0
SYMATTR InstName S1
SYMBOL res 96 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {mc(w,e)}
SYMATTR SpiceLine tol=1
SYMBOL res 128 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {mc(2*w,e)}
SYMATTR SpiceLine tol=1
SYMBOL res 48 -432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value {mc(4*w, e)}
SYMATTR SpiceLine tol=1
SYMBOL voltage -400 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {modulo(floor((x+8)/8),2)}
SYMBOL voltage -480 -160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {modulo(floor(x/4),2)}
SYMBOL voltage -480 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value {modulo(floor(x/2),2)}
SYMBOL voltage -480 -432 R0
WINDOW 3 24 44 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value {modulo(floor(x),2)}
SYMATTR InstName V5
SYMBOL cap 400 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL voltage -976 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 48V
SYMBOL res 848 -80 R0
SYMATTR InstName R15
SYMATTR Value 10k
SYMATTR SpiceLine tol=100k
SYMBOL res 848 32 R0
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL voltage -1024 -384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 22V
SYMBOL res 96 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {mc(w/2,e)}
SYMATTR SpiceLine tol=1
SYMBOL lm358 352 96 R0
SYMATTR InstName U1
TEXT -352 328 Left 2 !.op
TEXT -352 392 Left 2 !.model SW SW(Ron=1 Roff=100Meg Vt=.5 Vh=-.4)
TEXT -360 464 Left 2 !.step param x 0 15 0.01
TEXT -344 536 Left 2 !.func modulo(x,y) {x-(floor(x/y)*y)}
TEXT -656 264 Left 2 !.param w 100k
TEXT -656 296 Left 2 !.param e 0.01
